<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="ynu.edu.order_service.mapper.OrdersMapper">

 <resultMap type="ynu.edu.order_service.po.Orders" id="ordersResultMap">
  <id column="order_id" property="orderId"/>
  <result column="user_id" property="userId"/>
  <result column="business_id" property="businessId"/>
  <result column="business_name" property="businessName"/>
  <result column="business_address" property="businessAddress"/>
  <result column="delivery_price" property="deliveryPrice"/>
  <result column="order_date" property="orderDate"/>
  <result column="order_total" property="orderTotal"/>
  <result column="da_id" property="daId"/>
  <result column="contact_name" property="contactName"/>
  <result column="contact_tel" property="contactTel"/>
  <result column="address" property="address"/>
  <result column="order_state" property="orderState"/>
  <collection property="list" ofType="ynu.edu.order_service.po.OrderDetailet"
              select="ynu.edu.order_service.mapper.OrderDetailetMapper.listOrderDetailetByOrderId"
              column="order_id"/>
 </resultMap>

 <select id="getOrdersById" parameterType="Integer" resultMap="ordersResultMap">
  SELECT * FROM orders WHERE order_id = #{orderId}
 </select>

 <select id="listOrdersByUserId" parameterType="String" resultMap="ordersResultMap">
  SELECT * FROM orders WHERE user_id = #{userId} ORDER BY order_id
 </select>

</mapper>